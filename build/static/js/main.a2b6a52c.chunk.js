(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{12:function(e,t,n){e.exports={container:"UserMenu_container__znuaz",user_menu__container:"UserMenu_user_menu__container__2dUDP",loginedSpan:"UserMenu_loginedSpan__2VUDr",user_avatar:"UserMenu_user_avatar__1fkCT",user_name:"UserMenu_user_name__2xQ9n",userMenu__list:"UserMenu_userMenu__list__2TI5x",userMenu__item:"UserMenu_userMenu__item__zFpGe",userMenu__link:"UserMenu_userMenu__link__2q29S",signOutBtn:"UserMenu_signOutBtn__mVAge"}},13:function(e,t,n){e.exports={hidden:"AppHeader_hidden__3EtXt","visually-hidden":"AppHeader_visually-hidden__2YJSp",header:"AppHeader_header__3X0vS",header__container:"AppHeader_header__container__1QiYh",site_logo:"AppHeader_site_logo__1l8g4",navigation_container:"AppHeader_navigation_container__2Dr2o",navigation_list:"AppHeader_navigation_list__2UNok",navigation_item:"AppHeader_navigation_item__1cV5s",navigation_link:"AppHeader_navigation_link__1xQQX",navigation_alink:"AppHeader_navigation_alink__1MVkV"}},14:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i});var a=function(e){return e.session.isAuthenticated},r=function(e){return e.session.user},i=function(e){return e.session.token}},2:function(e,t,n){"use strict";t.a=Object.freeze({HOME:"/",AUTH:"/auth",MENU:"/menu",MENU_ITEM:"/menu/:id",ORDER_HISTORY:"/order-history",CART:"/cart",CHECKOUT:"/checkout",ACCOUNT:"/account",PLANNER:"/planner",ABOUT:"/about",CONTACT:"/contact",DELIVERY:"/delivery",FAVORITES:"/favorites",SIGN_IN:"/login",SIGN_UP:"/sign-up",NOT_FOUND:"*"})},25:function(e,t,n){"use strict";var a=n(22),r=n.n(a),i=n(42),c=n(5),o=function(e){return{type:c.a,payload:{error:e}}},u=n(30),l=n(14);n.d(t,"b",function(){return E}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return m});var s=function(){r.a.defaults.baseURL=i.a},_=function(e){r.a.defaults.headers.common.Authorization="Bearer ".concat(e)},E=function(e){return function(t){return s(),t({type:c.b}),r.a.post("/auth/login",e).then(function(e){var n=e.data;return"success"===n.status?(_(n.token),t(function(e){return{type:c.c,payload:e}}(n))):t(o(n.message))}).catch(function(e){return t(o(e))})}},d=function(){return function(e,t){e({type:c.f}),s();var n={headers:{Authorization:Object(l.b)(t())}};return r.a.post("auth/logout",{},n).then(function(){e({type:c.g}),e(Object(u.a)())})}},m=function(){return function(e,t){var n=Object(l.b)(t());n&&(s(),_(n),e({type:c.d}),r.a.post("/auth/current",{}).then(function(t){var a,r=t.data;return _(n),e((a=r.user,{type:c.e,payload:{user:a}}))}).catch(function(e){r.a.defaults.headers.common.Authorization=null,console.log("Error while refreshing: ",e)}))}}},26:function(e,t,n){e.exports={wrap:"userAuth_wrap__2l4jR",link:"userAuth_link__mc51y",link_active:"userAuth_link_active__3dHWX"}},28:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(39),c=n.n(i);t.a=function(){return r.a.createElement("div",{className:c.a.backdrop},r.a.createElement("div",{className:c.a.loader}," Loading... "))}},29:function(e,t,n){"use strict";var a=n(15),r=n(16),i=n(18),c=n(17),o=n(19),u=n(0),l=n.n(u),s=n(11),_=n(25),E=n(14);t.a=function(e){var t=function(t){function n(){return Object(a.a)(this,n),Object(i.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(o.a)(n,t),Object(r.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isAuthenticated,n=e.location,a=e.history,r=(n.state||{from:{pathname:"/"}}).from;t&&a.push({pathname:r.pathname,state:{from:n}})}},{key:"render",value:function(){return l.a.createElement(e,this.props)}}]),n}(u.Component),n={signIn:_.b};return Object(s.b)(function(e){return{isAuthenticated:Object(E.a)(e)}},n)(t)}},3:function(e,t,n){"use strict";t.a={MENU_FETCH_REQUEST:"[menu dishList] FETCH_REQUEST",MENU_FETCH_SUCCESS:"[menu dishList] FETCH_SUCCESS",MENU_FETCH_ERROR:"[menu dishList] FETCH_ERROR",AVAILABLE_CATEGORIES_FETCH_REQUEST:"[menu availableCategories] FETCH_REQUEST",AVAILABLE_CATEGORIES_FETCH_SUCCESS:"[menu availableCategories] FETCH_SUCCESS",AVAILABLE_CATEGORIES_FETCH_ERROR:"[menu availableCategories] FETCH_ERROR",FILTER_BY_CATEGORY_GET:"[menu filterByCategory] FILTER_GET",FILTER_BY_CATEGORY_CHANGED:"[menu filterByCategory] FILTER_CHANGED",FILTER_BY_CATEGORY_CLEAR:"[menu filterByCategory] FILTER_CLEAR",FILTER_BY_DISH_NAME:"[menu filterByDishName] FILTER_CHANGED"}},30:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(9),r=function(){return{type:a.a.CLEAN_CART,payload:[]}};t.b={cleanCart:r,addToCart:function(e){return{type:a.a.ADD_TO_CART,payload:{id:e}}},deleteFromCart:function(e){return{type:a.a.DELETE_FROM_CART,payload:{id:e}}},incrementQty:function(e){return{type:a.a.INCREMENT_AMOUNT,payload:{id:e}}},decrementQty:function(e){return{type:a.a.DECREMENT_AMOUNT,payload:{id:e}}}}},35:function(e,t,n){e.exports={container:"CartLink_container__1ePkZ",amount:"CartLink_amount__1wF1M",image:"CartLink_image__3Gi9f"}},39:function(e,t,n){e.exports={loader:"spinner_loader__3qnR6",load1:"spinner_load1__GOOY1",backdrop:"spinner_backdrop__PqLLN"}},42:function(e,t,n){"use strict";t.a="https://foodydederiaserver.herokuapp.com/"},44:function(e,t,n){"use strict";var a=n(30),r=n(23),i=n(31),c=function(e){return e.cart.ids},o=function(e){return e.cart.qty},u=Object(i.a)(c,function(e){return e?e.length:[]}),l=Object(i.a)([c,o,function(e){return e.entities.dishes}],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.map(function(e){return Object(r.a)({},n[e],{qty:t[e]})})}),s={getTotalPrice:Object(i.a)(l,function(e){return e.reduce(function(e,t){return e+t.price*t.qty},0)}),getCartItems:l,getCartItemsQty:o,getCartItemsQtyFigure:u};n.d(t,"a",function(){return a.b}),n.d(t,"b",function(){return s})},5:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return o}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return l});var a="[session] AUTH_REQUEST",r="[session] AUTH_SUCCESS",i="[session] AUTH_ERROR",c="[session] SIGN_OUT_REQUEST",o="[session] SIGN_OUT_SUCCESS",u="[session] GET_CURRENT_USER_REQUEST",l="[session] GET_CURRENT_USER_SUCCESS"},53:function(e,t,n){e.exports=n.p+"static/media/avatar.ff340518.png"},57:function(e,t,n){e.exports=n.p+"static/media/logo.925e7aa2.png"},62:function(e,t,n){e.exports=n(92)},9:function(e,t,n){"use strict";t.a={ADD_TO_CART:"[cart] ADD_TO_CART",DELETE_FROM_CART:"[cart] DELETE_FROM_CART",INCREMENT_AMOUNT:"[cart] INCREMENT_AMOUNT",DECREMENT_AMOUNT:"[cart] DECREMENT_AMOUNT",CLEAN_CART:"[cart] CLEAN_CART"}},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(43),c=n.n(i),o=n(95),u=n(60),l=n(11),s=n(56),_=n(15),E=n(16),d=n(18),m=n(17),p=n(19),f=n(96),h=n(28),O=n(40),C=n(57),T=n.n(C),v=n(13),g=n.n(v),b=n(2),A=function(){return r.a.createElement(O.a,{to:b.a.HOME},r.a.createElement("img",{className:g.a.site_logo,src:T.a,alt:"logo"}))},R=n(93),y=[{name:"Menu",path:b.a.MENU},{name:"About",path:b.a.ABOUT},{name:"Contact",path:b.a.CONTACT},{name:"Delivery",path:b.a.DELIVERY}],N=function(){var e=y.map(function(e){return r.a.createElement("li",{className:g.a.navigation_item,key:e.name},r.a.createElement(R.a,{to:e.path,className:g.a.navigation_link,activeClassName:g.a.navigation_alink},e.name))});return r.a.createElement("nav",{className:g.a.navigation_container},r.a.createElement("ul",{className:g.a.navigation_list}," ",e," "))},S=n(29),U=[{name:"Account",path:b.a.ACCOUNT},{name:"Order History",path:b.a.ORDER_HISTORY},{name:"Meal Planner",path:b.a.PLANNER}],j=n(12),M=n.n(j),I=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSignOut=function(){var e=n.props,t=e.onSignOut,a=e.history;return t().then(function(){return a.push({pathname:"/"})})},n}return Object(p.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:M.a.container},r.a.createElement("ul",{className:M.a.userMenu__list},U.map(function(e){return r.a.createElement("li",{key:e.name,className:M.a.userMenu__item},r.a.createElement(O.a,{to:e.path,className:M.a.userMenu__link},e.name))})),r.a.createElement("button",{className:M.a.signOutBtn,type:"button",onClick:this.handleSignOut}))}}]),t}(a.PureComponent),L=Object(S.a)(I),D=n(53),k=n.n(D),H=function(e){function t(){var e,n;Object(_.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={isDropDownOpen:!1},n.userNavContainer=Object(a.createRef)(),n.handleWindowClick=function(e){var t=n.userNavContainer.current.contains(e.target),a=n.state.isDropDownOpen;!t&&a&&n.toggleDropDown()},n.toggleDropDown=function(){n.setState(function(e){return{isDropDownOpen:!e.isDropDownOpen}})},n}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleWindowClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleWindowClick)}},{key:"render",value:function(){var e=this.state.isDropDownOpen,t=this.props,n=t.user,a=t.onSignOut,i=t.history,c=r.a.createElement("img",{className:M.a.user_avatar,src:n.avatar,alt:"avatar"}),o=r.a.createElement("img",{className:M.a.user_avatar,src:k.a,alt:"avatar"}),u=r.a.createElement("span",{className:M.a.user_name},n.nickName);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:M.a.user_menu__container,onClick:this.toggleDropDown,ref:this.userNavContainer},n.avatar?c:o,r.a.createElement("span",{className:M.a.loginedSpan},"Welcome, "),u,e&&r.a.createElement(L,{onSignOut:a,history:i})))}}]),t}(a.Component),F=n(35),w=n.n(F),G=function(e){var t=e.qty;return r.a.createElement("div",{className:w.a.container},r.a.createElement(O.a,{to:b.a.CART},r.a.createElement("img",{className:w.a.image,src:"http://icons.iconarchive.com/icons/rafiqul-hassan/blogger/256/Shopping-Cart-icon.png",width:"60",alt:"cart"}),t>0&&r.a.createElement("span",{className:w.a.amount},t)))},B=n(44),x=Object(l.b)(function(e){return{qty:B.b.getCartItemsQtyFigure(e)}})(G),Y=n(26),z=n.n(Y),Q=Object(S.a)(function(){return r.a.createElement("div",{className:z.a.wrap},r.a.createElement(R.a,{to:b.a.SIGN_UP,className:z.a.link,activeClassName:z.a.link_active},"Sign up"),r.a.createElement(R.a,{to:b.a.SIGN_IN,className:z.a.link,activeClassName:z.a.link_active},"Log in"))}),P=n(14),V=n(25),q={onSignOut:V.c},W=Object(l.b)(function(e){return{user:Object(P.c)(e),isAuthenticated:Object(P.a)(e)}},q)(function(e){var t=e.isAuthenticated,n=e.user,a=e.onSignOut,i=e.history,c=e.location;return r.a.createElement("header",{className:g.a.header},r.a.createElement("div",{className:g.a.header__container},r.a.createElement(A,null),r.a.createElement(N,null),t?r.a.createElement(H,{user:n,onSignOut:a,history:i}):r.a.createElement(Q,{history:i,location:c}),r.a.createElement(x,null)))}),X=n(34),J=n(94),K=Object(l.b)(function(e){return{isAuthenticated:Object(P.a)(e)}})(function(e){var t=e.component,n=e.redirectTo,a=void 0===n?b.a.SIGN_IN:n,i=e.isAuthenticated,c=Object(X.a)(e,["component","redirectTo","isAuthenticated"]);return r.a.createElement(u.a,Object.assign({},c,{render:function(e){return i?r.a.createElement(t,e):r.a.createElement(J.a,{to:{pathname:a,state:{from:e.location}}})}}))}),Z=Object(a.lazy)(function(){return Promise.all([n.e(0),n.e(17),n.e(7)]).then(n.bind(null,142))}),$=Object(a.lazy)(function(){return n.e(8).then(n.bind(null,143))}),ee=Object(a.lazy)(function(){return n.e(1).then(n.bind(null,135))}),te=Object(a.lazy)(function(){return n.e(4).then(n.bind(null,136))}),ne=Object(a.lazy)(function(){return n.e(5).then(n.bind(null,137))}),ae=Object(a.lazy)(function(){return n.e(2).then(n.bind(null,146))}),re=Object(a.lazy)(function(){return n.e(10).then(n.bind(null,138))}),ie=Object(a.lazy)(function(){return n.e(11).then(n.bind(null,139))}),ce=Object(a.lazy)(function(){return n.e(9).then(n.bind(null,140))}),oe=Object(a.lazy)(function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,144))}),ue=Object(a.lazy)(function(){return n.e(6).then(n.bind(null,141))}),le=Object(a.lazy)(function(){return n.e(12).then(n.bind(null,147))}),se=Object(a.lazy)(function(){return n.e(13).then(n.bind(null,145))}),_e=function(e){function t(){return Object(_.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getUser)()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,this.props),r.a.createElement(a.Suspense,{fallback:r.a.createElement(h.a,null)},r.a.createElement(f.a,null,r.a.createElement(u.a,{exact:!0,path:b.a.HOME,component:function(){return r.a.createElement(ue,null)}}),r.a.createElement(u.a,{exact:!0,path:b.a.MENU,component:function(e){return r.a.createElement(Z,e)}}),r.a.createElement(u.a,{path:b.a.MENU_ITEM,component:function(e){return r.a.createElement($,e)}}),r.a.createElement(u.a,{exact:!0,path:b.a.ABOUT,component:function(){return r.a.createElement(ee,null)}}),r.a.createElement(u.a,{exact:!0,path:b.a.CONTACT,component:function(){return r.a.createElement(te,null)}}),r.a.createElement(u.a,{exact:!0,path:b.a.DELIVERY,component:function(){return r.a.createElement(ne,null)}}),r.a.createElement(K,{exact:!0,path:b.a.ACCOUNT,component:function(){return r.a.createElement(ae,null)}}),r.a.createElement(K,{exact:!0,path:b.a.ORDER_HISTORY,component:function(){return r.a.createElement(re,null)}}),r.a.createElement(K,{exact:!0,path:b.a.PLANNER,component:function(){return r.a.createElement(ie,null)}}),r.a.createElement(u.a,{exact:!0,path:b.a.SIGN_IN,component:function(e){return r.a.createElement(le,e)}}),r.a.createElement(u.a,{exact:!0,path:b.a.SIGN_UP,component:function(e){return r.a.createElement(se,e)}}),r.a.createElement(u.a,{exact:!0,path:b.a.CART,component:function(e){return r.a.createElement(oe,e)}}),r.a.createElement(u.a,{exact:!0,path:b.a.NOT_FOUND,component:function(){return r.a.createElement(ce,null)}}))))}}]),t}(a.Component),Ee={getUser:V.a},de=Object(l.b)(null,Ee)(_e),me=n(7),pe=n(58),fe=n(59),he=n(27),Oe=n(41),Ce=n.n(Oe),Te=n(5),ve=Object(me.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Te.c:case Te.e:return a.user;case Te.a:return alert("Invalid login or password"),a;case Te.g:return null;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Te.c:return a.token;case Te.a:case Te.g:return null;default:return e}},isAuthenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Te.c:case Te.e:return!0;case Te.a:case Te.g:return!1;default:return e}}}),ge=n(3);var be=n(24),Ae=n(23),Re=n(54),ye=n(9);function Ne(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Se=Object(me.combineReducers)({ids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ye.a.ADD_TO_CART:return e.includes(a.id)?e:[].concat(Object(Re.a)(e),[a.id]);case ye.a.DELETE_FROM_CART:return e.filter(function(e){return e!==a.id});case ye.a.CLEAN_CART:return a;default:return e}},qty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ye.a.ADD_TO_CART:case ye.a.INCREMENT_AMOUNT:return Object(Ae.a)({},e,Object(be.a)({},a.id,e[a.id]?e[a.id]+1:1));case ye.a.DECREMENT_AMOUNT:return Object(Ae.a)({},e,Object(be.a)({},a.id,e[a.id]>1?e[a.id]-1:1));case ye.a.DELETE_FROM_CART:return e[a.id],Object(X.a)(e,[a.id].map(Ne));default:return e}}}),Ue={key:"root",storage:Ce.a,whitelist:"cart"},je={key:"session",storage:Ce.a,whitelist:["token"]},Me=Object(me.combineReducers)({dishListIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.MENU_FETCH_SUCCESS:return a.ids.dishes;default:return e}},cart:Se,entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.MENU_FETCH_SUCCESS:return a.entities;default:return e}},availableCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.AVAILABLE_CATEGORIES_FETCH_SUCCESS:return a;default:return e}},filterByCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.FILTER_BY_CATEGORY_GET:case ge.a.FILTER_BY_CATEGORY_CHANGED:case ge.a.FILTER_BY_CATEGORY_CLEAR:return a;default:return e}},filterByName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.FILTER_BY_DISH_NAME:return a;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case ge.a.MENU_FETCH_REQUEST:case ge.a.AVAILABLE_CATEGORIES_FETCH_REQUEST:return!0;case ge.a.MENU_FETCH_SUCCESS:case ge.a.MENU_FETCH_ERROR:case ge.a.AVAILABLE_CATEGORIES_FETCH_SUCCESS:case ge.a.AVAILABLE_CATEGORIES_FETCH_ERROR:return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ge.a.MENU_FETCH_REQUEST:return null;case ge.a.MENU_FETCH_ERROR:return a;default:return e}},session:Object(he.a)(je,ve)}),Ie=Object(he.a)(Ue,Me),Le=Object(pe.composeWithDevTools)(Object(me.applyMiddleware)(fe.a)),De=Object(me.createStore)(Ie,Le),ke=Object(he.b)(De);c.a.render(r.a.createElement(l.a,{store:De},r.a.createElement(s.a,{loading:r.a.createElement(h.a,null),persistor:ke},r.a.createElement(o.a,null,r.a.createElement(u.a,{component:de})))),document.getElementById("root"))}},[[62,15,16]]]);
//# sourceMappingURL=main.a2b6a52c.chunk.js.map