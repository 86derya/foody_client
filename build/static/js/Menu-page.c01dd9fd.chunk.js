(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{104:function(e,t,a){"use strict";var n=a(102),r=a(3),i=new n.b.Entity("dishes",void 0,{idAttribute:"_id"}),c={fetchRequest:function(){return{type:r.a.MENU_FETCH_REQUEST}},fetchSuccess:function(e){var t=Object(n.a)(e,[i]);return{type:r.a.MENU_FETCH_SUCCESS,payload:{ids:{dishes:Object.keys(t.entities.dishes)},entities:t.entities}}},fetchError:function(e){return{type:r.a.MENU_FETCH_ERROR,payload:e}},fetchAvailableCategoriesRequest:function(){return{type:r.a.AVAILABLE_CATEGORIES_FETCH_REQUEST}},fetchAvailableCategoriesSuccess:function(e){return{type:r.a.AVAILABLE_CATEGORIES_FETCH_SUCCESS,payload:e}},fetchAvailableCategoriesError:function(e){return{type:r.a.AVAILABLE_CATEGORIES_FETCH_ERROR,payload:e}},getCategoryFilter:function(e){return{type:r.a.FILTER_BY_CATEGORY_GET,payload:e||""}},changeCategoryFilter:function(e,t,a){return t.push({pathname:a.pathname,search:"category=".concat(e)}),{type:r.a.FILTER_BY_CATEGORY_CHANGED,payload:e}},clearCategoryFilter:function(e){return e.push({pathname:"/menu"}),{type:r.a.FILTER_BY_CATEGORY_CLEAR,payload:""}},changeNameFilter:function(e){return{type:r.a.FILTER_BY_DISH_NAME,payload:e}}},o=a(97),l=a.n(o),u=a(98),s=a(22),_=a.n(s),m=a(42);_.a.defaults.baseURL=m.a;var g={fetchMenuItems:function(e){return function(){var t=Object(u.a)(l.a.mark(function t(a){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a(c.fetchRequest()),t.prev=1,!e){t.next=8;break}return t.next=5,_.a.get("/menu?category=".concat(e));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,_.a.get("/menu");case 10:t.t0=t.sent;case 11:n=t.t0,a(c.fetchSuccess(n.data.menuItems)),t.next=18;break;case 15:t.prev=15,t.t1=t.catch(1),a(c.fetchError(t.t1));case 18:case"end":return t.stop()}},t,null,[[1,15]])}));return function(e){return t.apply(this,arguments)}}()},fetchAvailableCategories:function(){return function(){var e=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(c.fetchAvailableCategoriesRequest()),e.prev=1,e.next=4,_.a.get("/categories");case 4:a=e.sent,t(c.fetchAvailableCategoriesSuccess(a.data.categories)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(c.fetchAvailableCategoriesError(e.t0));case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()}},d=a(31),y=function(e){return e.filterByName},f=Object(d.a)([function(e){return e.dishListIds},function(e){return e.entities.dishes}],function(e,t){return e.map(function(e){return t[e]})}),p=Object(d.a)([f,y],function(e,t){return e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())})}),C={getFilterByName:y,getAvailableCategories:function(e){return e.availableCategories},getFilterByCategory:function(e){return e.filterByCategory},getFilteredByNameDishes:p,getVisibleDishes:function(e){return y(e)?p(e):f(e)},getIsLoading:function(e){return e.isLoading}};a.d(t,"a",function(){return c}),a.d(t,"b",function(){return g}),a.d(t,"c",function(){return C})},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),c=a(16),o=a(18),l=a(17),u=a(19),s=a(11),_=a(105),m=a.n(_),g=a(28),d=a(134),y=a(99),f=a.n(y),p=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleFilterChange=function(e){var t=a.props,n=t.onCategoryChange,r=t.history,i=t.location;e!==m.a.parse(i.search).category&&n(e,r,i)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.categoriesOption,n=t.selectedCategory,i=t.onClearCategorySelector,c=t.history,o=[];return a.map(function(e){return o.push({value:e.name,label:e.name})}),r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{className:f.a.categorySelector_container},r.a.createElement("p",{className:f.a.selectedCategory__descr},"Selected Category: ",r.a.createElement("span",null,n)),r.a.createElement("button",{className:f.a.button__clearFilter,type:"button",onClick:function(){return i(c)}},"X")),r.a.createElement(d.a,{className:f.a.select,options:o,onChange:function(t){return e.handleFilterChange(t.value)},value:n,placeholder:"Select Category..."}))}}]),t}(n.Component),C=function(e){var t=e.filter,a=e.onFilterChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:f.a.filterByName_input,type:"text",value:t,onChange:a,placeholder:" Filter by name..."}),t&&r.a.createElement("p",{className:f.a.filterByName_summary},"Filter by dish name:",r.a.createElement("span",{className:f.a.filterByName_filterBy}," ",t),r.a.createElement("span",{className:f.a.filterByName_blinking},"...")))},h=a(40),E=function(e){var t=e.name,a=e.image,i=e.price,c=e.description,o=e.currency,l=r.a.createElement("img",{className:f.a.menu_card_image,src:a,alt:"dish_photo"}),u=r.a.createElement("p",{className:f.a.menu_card_title}," ",t," "),s=r.a.createElement("p",{className:f.a.menu_card_price},"Price: ",i," ",o),_=r.a.createElement("p",{className:f.a.menu_card_description}," ",c," ");return r.a.createElement(n.Fragment,null,l,u,_,s)},b=function(e){var t=e.dishList,a=e.match,n=e.location,i=e.onAddToCart,c=t.map(function(e){var t=e._id,c=e.name,o=e.price,l=e.image,u=e.description,s=e.currency;return r.a.createElement("li",{className:f.a.menu_item,key:t},r.a.createElement(h.a,{className:f.a.menu_item_link,to:{pathname:"".concat(a.url,"/").concat(t),state:{from:n}}},r.a.createElement(E,{name:c,price:o,image:l,description:u,currency:s})),r.a.createElement("button",{className:f.a.addToCartBtn,type:"button",onClick:function(){return i(t)}}))});return r.a.createElement("div",{className:f.a.menu__grid_container},r.a.createElement("ul",{className:f.a.menu_list},c))},v=function(e){var t=e.dishList,a=e.match,n=e.location,i=e.history,c=e.availableCategories,o=e.filterByCategory,l=e.onCategoryChange,u=e.onClearCategorySelector,s=e.onFilterByNameChange,_=e.filterByName,m=e.isLoading,d=e.onAddToCart;return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(g.a,null):r.a.createElement("div",{className:f.a.container},r.a.createElement(p,{categoriesOption:c,selectedCategory:o,onCategoryChange:l,onClearCategorySelector:u,history:i,location:n}),r.a.createElement(C,{filter:_,onFilterChange:function(e){var t=e.target;return s(t.value)}}),r.a.createElement(b,{dishList:t,match:a,location:n,onAddToCart:d})))},N=a(104),B=a(44),F=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.props,a=t.fetchMenuItems,n=t.getFilterByCategory,r=t.fetchAvailableCategories,i=t.availableCategories,c=(e=this.props,m.a.parse(e.location.search).category);return i.length<1&&r(),n(c),a(c)}},{key:"render",value:function(){return r.a.createElement(v,this.props)}}]),t}(n.Component),A={onAddToCart:B.a.addToCart,fetchMenuItems:N.b.fetchMenuItems,fetchAvailableCategories:N.b.fetchAvailableCategories,onCategoryChange:N.a.changeCategoryFilter,onClearCategorySelector:N.a.clearCategoryFilter,getFilterByCategory:N.a.getCategoryFilter,onFilterByNameChange:N.a.changeNameFilter},M=Object(s.b)(function(e){return{dishList:N.c.getVisibleDishes(e),availableCategories:N.c.getAvailableCategories(e),filterByCategory:N.c.getFilterByCategory(e),filterByName:N.c.getFilterByName(e),isLoading:N.c.getIsLoading(e)}},A)(F);t.default=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,e))}},99:function(e,t,a){e.exports={menu:"Menu_menu__13KUu",container:"Menu_container__2xxlb",input:"Menu_input__2c-dt",filterByName_input:"Menu_filterByName_input__vUH2_",filterByName_summary:"Menu_filterByName_summary__d4i1o",filterByName_filterBy:"Menu_filterByName_filterBy__3wPD1",filterByName_blinking:"Menu_filterByName_blinking__1Ce--",blinker:"Menu_blinker__3qXNY",menu__grid_container:"Menu_menu__grid_container__1LeSe",menu_list:"Menu_menu_list__SEFTq",menu_item:"Menu_menu_item__2qteZ",menu_item_link:"Menu_menu_item_link__2Cg0p",menu_card_image:"Menu_menu_card_image__25GJN",menu_card_title:"Menu_menu_card_title__3TnIy",menu_card_price:"Menu_menu_card_price__2pr8Q",menu_card_description:"Menu_menu_card_description__2cQot",addDish__link:"Menu_addDish__link__3tySE",addDishBtn:"Menu_addDishBtn__3D7cC",select:"Menu_select__Srj2T",categorySelector_container:"Menu_categorySelector_container__2mxrp",selectedCategory__descr:"Menu_selectedCategory__descr__3ER60",button__clearFilter:"Menu_button__clearFilter__1ULLT",addToCartBtn:"Menu_addToCartBtn__2y7S7",addToCartIcon:"Menu_addToCartIcon__1jgg6"}}}]);
//# sourceMappingURL=Menu-page.c01dd9fd.chunk.js.map